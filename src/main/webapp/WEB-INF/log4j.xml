<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">
	<!--输出方式：输出到控制台-->
	<appender name="CONSOLE" class="org.apache.log4j.ConsoleAppender">
		<!-- 指定日志输出级别 -->
		<param name="Threshold" value="info"/>
		<!-- 设置日志输出的格式-->  
    	<layout class="org.apache.log4j.PatternLayout">
    		<param name="ConversionPattern"  value="%-d{yyyy-MM-dd HH:mm:ss} - ip=%X{ip} - %m - usetime=%X{usetime}ms - method=%X{method}%n" />
    	</layout>
	</appender>

	<!-- 文件日志：输出全部日志到文件 -->
	<appender name="FILE" class="org.apache.log4j.DailyRollingFileAppender">
		<param name="file" value="/home/ec2-user/apache-tomcat-8.5.20/logs/tile.log" />
		<param name="append" value="true" /><!--一般必须配置true，否则会覆盖而不是累加-->
		<param name="encoding" value="UTF-8" />
		<!-- 指定日志输出级别 -->
		<param name="Threshold" value="info"/>
		<layout class="org.apache.log4j.PatternLayout">
			<param name="ConversionPattern" value="%-d{yyyy-MM-dd HH:mm:ss} - ip=%X{ip} - %m - usetime=%X{usetime}ms - method=%X{method}%n" />
		</layout>
	</appender>
	<!-- 
       定义全局的日志输出级别,输出INFO级别的日志到控制台，供logger继承
      -->
	<root>
		<appender-ref ref="CONSOLE" />
		<appender-ref ref="FILE" />
	</root>
	
</log4j:configuration>